# Copyright 2025 Causely, Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# SPDX-License-Identifier: Apache-2.0

image:
  repository: us-docker.pkg.dev/public-causely/public/bot
  tag: "latest"
  pullPolicy: Always

replicaCount: 1

auth:
  token: "<YOUR_CAUSELYBOT_TOKEN>" # Required

webhooks:
  - name: "<FRIENDLY_WEBHOOK_NAME>" # Required
    hook_type: "<YOUR_WEBHOOK_TYPE>" # Required [slack, teams, jira, opsgenie, github, template]
    url: "<YOUR_WEBHOOK_URL>" # Required (for github use "owner/repo")
    token: "<YOUR_WEBHOOK_TOKEN>" # Optional (required for github: PAT with repo + issues scope)
    # assignee: "" # Optional; for GitHub use e.g. "copilot-swe-agent" to assign issues
    filters: # Optional
      enabled: true
      values:
        - field: "severity"
          operator: "in"
          value: ["High", "Critical"]
  # Example GitHub webhook: url = "owner/repo", token = GitHub PAT, optional assignee
  # - name: "github"
  #   hook_type: "github"
  #   url: "myorg/my-repo"
  #   token: "" # GitHub token with repo + issues scope
  #   assignee: "copilot-swe-agent" # optional
  #   filters:
  #     enabled: true
  #     values: []
  # Example template webhook: map Causely payload to any backend via Jinja2 (delimiters [[ ]] avoid Helm conflicts)
  # - name: "my-backend"
  #   hook_type: "template"
  #   url: "https://your-api.example.com/alerts"
  #   token: "" # optional
  #   filters:
  #     enabled: true
  #     values: []
  #   template:
  #     content_type: "application/json"
  #     body: |
  #       {
  #         "title": "[[ name ]]",
  #         "priority": "[[ severity ]]",
  #         "entity": [[ entity | tojson ]],
  #         "slo_names": [{% for s in slos %}"[[ s.slo_entity.name ]]"{% if not loop.last %}, {% endif %}{% endfor %}]
  #       }